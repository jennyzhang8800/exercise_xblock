{"knowledge": "信号量。", "question": "(20140606-期末考试试题&参考答案.docx)信号量实现\r\n(10分)在uCore中，信号量的定义如下\r\n    ```\r\n\t    typedef struct {\r\n\t        int value;\r\n\t        wait_queue_t wait_queue;\r\n\t    } semaphore_t;\r\n\t    ```\r\n\t__up函数是信号量V操作的具体实现函数\r\n\t    ```\r\n\t    static __noinline void __up(semaphore_t sem, uint32_t wait_state) {\r\n\t        bool intr_flag;\r\n\t        local_intr_save(intr_flag);\r\n\t        {\r\n\t            wait_t wait;\r\n\t            if((wait=wait_queue_first(&(sem->wait_queue)))==NULL){\r\n\t                ________;\r\n\t            } else {\r\n\t                wakeup_wait(&(sem->wait_queue), wait, wait_state, 1);\r\n\t            }\r\n\t        }\r\n\t        local_intr_restore(intr_flag);\r\n\t    }\r\n\t    ```\r\n1）补全程序中的空行________。\r\n2）信号量的value值>0时，表示________的数量;value值<0时，表示________的数量。\r\n3）local_intr_save和local_intr_restore这两个函数的功能分别是什么？为什么要调用这两个函数？", "degree_of_difficulty": "1", "source": "网络", "answer": "1) sem->value++（2分）", "type": "question_answer", "options": "  \r\n"}